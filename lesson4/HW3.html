<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Загадки</title>
</head>
<body>
<script>
    "use strict";

    //Создаем массив с объектами вопросов и ответов
    const puzzles = [
        {
            text: 'Кто из указанных личностей не был мушкетером на момент их совместной встречи?',
            answers: {
                'a': 'Атос',
                'b': 'Портос',
                'c': 'Арамис',
                'd': 'Д\'Артаньян'
            },
            coreectAnswerIndex: 'd',
        },
        {
            text: 'Где жили викинги?',
            answers: {
                'a': 'Россия',
                'b': 'Дания',
                'c': 'США',
                'd': 'Викичто?'
            },
            coreectAnswerIndex: 'b',
        },
        {
            text: 'Какого цвета звезды над Кремлем?',
            answers: {
                'a': 'Красные',
                'b': 'Зависит от размера',
                'c': 'Какие звезды, там орлы',
                'd': 'Золотые'
            },
            coreectAnswerIndex: 'a',
        },
        {
            text: 'Кто из них не был Президентом России?',
            answers: {
                'a': 'Ельцин',
                'b': 'Горбачев',
                'c': 'Медведев',
                'd': 'Путин'
            },
            coreectAnswerIndex: 'b',
        },
        {
            text: 'У попа была собака... Кто её убил?',
            answers: {
                'a': 'Жена его',
                'b': 'Работник его Балда',
                'c': 'Поп',
                'd': 'Кто-нибудь позвоните Пуаро'
            },
            coreectAnswerIndex: 'c',
        }
    ];

    /**
     * Объект игры, здесь будут все методы и свойства связанные с самой игрой в общем.
     * @property {settings} settings Настройки игры.
     * @property {player} player Игрок, участвующий в игре.
     */
    const game = {
        puzzles,
        score: 0,
        puzzleIndex: 0,

        /**
         * Запускает игру.
         */
        run() {
            // создаем цикл для перебора вопросов
            while (this.puzzleIndex < puzzles.length) {

                //задаем переменной значение
                let puzzle = puzzles[this.puzzleIndex];

                // Отображаем нашу игру
                this.render(puzzle);

                // Получаем направление от игрока.
                const answer = this.getAnswer();

                // Если игрок сказал что хочет выйти (набрал exit), значит выходим.
                if (answer === 'exit') {
                    alert('До свидания.');
                    break;
                } else if (answer === puzzle.coreectAnswerIndex) { // если дал корректное значение подтверждаем это
                    alert('Верно.');
                    this.score++; // увеличиваем счет
                } else {
                    alert('Не правильно.'); //уведомляем игрока если ответ не верный
                }

                this.puzzleIndex++ // делаем переход к следующему вопросу
            }
            alert(`Ваш результат ${this.score} баллов`) // выдаем результат
        },

        /**
         * Отображает игру в консоли.
         */
        render(index) {
            // Сюда запишем все что надо отобразить.
            let puzzle = index.text;
            let answers = index.answers;
            // Чистим консоль.
            console.clear();
            // Выводим все что надо отобразить в игре.
            console.log(puzzle);
            console.log(answers)
        },

        /**
         * Получает и отдает направление от пользователя.
         * @returns {string} Возвращаем направление, введенное пользователем.
         */
        getAnswer() {
            const availableAnswers = ['exit', 'a', 'b', 'c', 'd'];

            while (true) {
                const answer = prompt('Введите вариант ответа, наберите exit для выхода.');
                // Если направление не одно из доступных, то сообщаем что надо ввести корректные данные
                // и начинаем новую итерацию.
                if (!availableAnswers.includes(answer)) {
                    alert(`Вы точно уверены? Такого варианта не существует, \
                    выбирайте из предложенных вариантов: ${availableAnswers.join(', ')}.`);
                    continue;
                }
                // Если пользователь ввел корректное значение - отдаем его.
                return answer;
            }
        },
    };

    // Запускаем игру.
    game.run();
</script>
</body>
</html>